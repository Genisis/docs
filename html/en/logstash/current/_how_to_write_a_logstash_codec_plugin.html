<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>How to write a Logstash codec plugin</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="index.html" title="Reference" /><link rel="prev" href="_how_to_write_a_logstash_input_plugin.html" title="How to write a Logstash input plugin" /><link rel="next" href="_how_to_write_a_logstash_filter_plugin.html" title="How to write a Logstash filter plugin" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><link rel="shortcut icon" href="//www.elasticsearch.org/content/themes/elasticsearch-org/favicon.ico" /><link rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="//www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link rel="stylesheet" id="appStyles-css" href="//www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1395693666" type="text/css" media="all" /><script type="text/javascript" src="//www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link rel="stylesheet" href="//www.elasticsearch.org/content/themes/elasticsearch-org/style.css" type="text/css" media="all" /><script src="//cdn.optimizely.com/js/281975433.js"></script><script type="text/javascript">
      jQuery(function() {
        jQuery('div.navheader+div').css('minHeight',jQuery('div.toc').height()+'px');
        jQuery('article.guide_content a[id]').each(function() { this.href='#'+this.id });
      });
    </script><link rel="stylesheet" type="text/css" href="styles.css?3" /></head><body class="single single-guide"><!--Google Tag Manager--><script> dataLayer = []; </script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5FTL28" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>
    if(jQuery('body').data('cookie') != "eu" || jQuery.cookie('allowCookies')){
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5FTL28');}
</script><!--[if lt IE 8]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
      <![endif]--><header><nav role="navigation" id="mobile-nav-container" class="off-canvas-nav"><ul id="mobile-nav" class="menu"><li id="menu-item-75892" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75892"><a href="/overview/">Overview</a><ul class="sub-menu"><li id="menu-item-75895" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75895"><a href="/overview/">Overview</a></li><li id="menu-item-68760" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68760"><a href="/overview/elasticsearch/">Elasticsearch</a></li><li id="menu-item-75894" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75894"><a href="/overview/marvel/">Marvel</a></li><li id="menu-item-68758" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68758"><a href="/overview/kibana/">Kibana</a></li><li id="menu-item-68756" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68756"><a href="/overview/kibana/installation/">Kibana Installation</a></li><li id="menu-item-68757" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68757"><a href="/overview/kibana/support/">Kibana Support</a></li><li id="menu-item-68759" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68759"><a href="/overview/logstash/">Logstash</a></li><li id="menu-item-74019" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-74019"><a href="/overview/hadoop/">Hadoop</a></li><li id="menu-item-75893" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75893"><a href="/overview/elkdownloads/">ELK Downloads</a></li></ul></li><li id="menu-item-55" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-55"><a href="/resources/">Resources</a><ul class="sub-menu"><li id="menu-item-76342" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76342"><a href="/guide/">Guide</a></li><li id="menu-item-4843" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4843"><a href="/videos/">Videos</a></li></ul></li><li id="menu-item-657" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-657"><a href="/community/">Community</a></li><li id="menu-item-68802" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68802"><a href="/case-studies/">Case Studies</a></li><li id="menu-item-45" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-45"><a href="/blog/">Blog</a></li><li id="menu-item-12" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a target="_blank" href="http://elasticsearch.com">Company</a></li></ul><ul class="add-on"><li><a href="/overview/elkdownloads/">Download</a></li></ul></nav><div class="container"><div id="header-inner"><h1 id="header-logo"><a class="faux" href="http://www.elasticsearch.org">Elasticsearch</a></h1><nav role="navigation" id="main-nav-container" class="main-nav"><ul id="top-nav" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-75892"><a href="/overview/">Overview</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-53 current_page_item menu-item-55"><a href="/resources/">Resources</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-657"><a href="/community/">Community</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-68802"><a href="/case-studies/">Case Studies</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-45"><a href="/blog/">Blog</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a target="_blank" href="http://elasticsearch.com">Company</a></li></ul><ul class="add-on"><li><a class="btn btn-primary" href="/overview/elkdownloads/">Download</a></li></ul></nav><div class="slide-trigger navigation" id="nav-trigger" aria-hidden="true"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div><hr /><ul id="sub_nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-76342"><a href="/guide/">Guide</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4843"><a href="/videos/">Videos</a></li></ul></div></div></header><div class="global_wrapper"><div class="page_content"><div class="container"><section id="search_container" class="active"><form id="blog_search" role="search" action="/" method="get"><div class="blog_search_wrapper"><input id="s" name="s" class="search_term" type="text" placeholder="search" autocomplete="off" tabindex="1" /><input type="submit" class="search_submit" value=" " /><ul id="results"></ul></div></form></section><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> » <span class="breadcrumb-node">How to write a Logstash codec plugin</span></div><div class="navheader"><span class="prev"><a href="_how_to_write_a_logstash_input_plugin.html">
              « 
              How to write a Logstash input plugin</a>
           
        </span><span class="next">
           
          <a href="_how_to_write_a_logstash_filter_plugin.html">How to write a Logstash filter plugin
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="_how_to_write_a_logstash_codec_plugin"></a>How to write a Logstash codec plugin<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="logstash-reference.html">Getting Started with Logstash</a></span></dt><dt><span class="chapter"><a href="_command_line_flags.html">Command-line flags</a></span></dt><dt><span class="chapter"><a href="configuration.html">Configuring Logstash</a></span></dt><dt><span class="chapter"><a href="pipeline.html">Logstash Processing Pipeline</a></span></dt><dt><span class="chapter"><a href="input-plugins.html">Input plugins</a></span></dt><dt><span class="chapter"><a href="output-plugins.html">Output plugins</a></span></dt><dt><span class="chapter"><a href="filter-plugins.html">Filter plugins</a></span></dt><dt><span class="chapter"><a href="codec-plugins.html">Codec plugins</a></span></dt><dt><span class="chapter"><a href="contributing-to-logstash.html">Contributing to Logstash</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_input_plugin.html">How to write a Logstash input plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_codec_plugin.html">How to write a Logstash codec plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_filter_plugin.html">How to write a Logstash filter plugin</a></span></dt><dt><span class="chapter"><a href="_how_to_write_a_logstash_output_plugin.html">How to write a Logstash output plugin</a></span></dt></dl></div><p>To develop a new codec for Logstash, you build a self-contained Ruby gem
whose source code lives in its own GitHub repository. The Ruby gem can then be
hosted and shared on RubyGems.org. You can use the example codec
implementation as a starting point. (If you’re unfamiliar with
Ruby, you can find an excellent quickstart guide at
<a class="ulink" href="https://www.ruby-lang.org/en/documentation/quickstart/" target="_top">https://www.ruby-lang.org/en/documentation/quickstart/</a>.)</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>As of Logstash 1.5, all plugins are self-contained Ruby gems. This change
makes it possible to develop and release plugins separately. In previous
versions, plugins were part of the core Logstash distribution.</p></div></div><h2><a id="_get_started_2"></a>Get started<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>Let’s step through creating a codec plugin using the <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-example/" target="_top">example codec plugin</a>.</p><h3><a id="_create_a_github_repo_for_your_new_plugin_2"></a>Create a GitHub repo for your new plugin<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Each Logstash plugin lives in its own GitHub repository. To create a new repository for your plugin:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Log in to GitHub.
</li><li class="listitem">
Click the <span class="strong"><strong>Repositories</strong></span> tab. You’ll see a list of other repositories you’ve forked or contributed to.
</li><li class="listitem">
Click the green <span class="strong"><strong>New</strong></span> button in the upper right.
</li><li class="listitem"><p class="simpara">
Specify the following settings for your new repo:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong"><strong>Repository name</strong></span> — a unique name of the form <code class="literal">logstash-codec-pluginname</code>.
</li><li class="listitem">
<span class="strong"><strong>Public or Private</strong></span> — your choice, but the repository must be Public if you want to submit it as an official plugin.
</li><li class="listitem">
<span class="strong"><strong>Initialize this repository with a README</strong></span> — enables you to immediately clone the repository to your computer.
</li></ul></div></li><li class="listitem">
Click <span class="strong"><strong>Create Repository</strong></span>.
</li></ol></div><h3><a id="_copy_the_codec_code"></a>Copy the codec code<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="_build_your_local_repository_2"></a>Build your local repository<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
<span class="strong"><strong>Clone your plugin.</strong></span> Replace <code class="literal">GITUSERNAME</code> with your github username, and
<code class="literal">MYPLUGINNAME</code> with your plugin name.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<code class="literal">git clone https://github.com/GITUSERNAME/logstash-</code><code class="literal">codec-MYPLUGINNAME.git</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
alternately, via ssh: <code class="literal">git clone git@github.com:GITUSERNAME/logstash</code><code class="literal">-codec-MYPLUGINNAME.git</code>
</li></ul></div></li><li class="listitem">
<code class="literal">cd logstash-codec-MYPLUGINNAME</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
</p><p class="simpara">You don’t want to include the example .git directory or its contents, so delete
it before you copy the example.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">cd /tmp</code>
</li><li class="listitem">
<code class="literal">git clone https://github.com/logstash-plugins/logstash</code><code class="literal">-codec-example.git</code>
</li><li class="listitem">
<code class="literal">cd logstash-codec-example</code>
</li><li class="listitem">
<code class="literal">rm -rf .git</code>
</li><li class="listitem">
<code class="literal">cp -R * /path/to/logstash-codec-mypluginname/</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
<span class="strong"><strong>Rename the following files to match the name of your plugin.</strong></span>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">logstash-codec-example.gemspec</code>
</li><li class="listitem">
<code class="literal">example.rb</code>
</li><li class="listitem"><p class="simpara">
<code class="literal">example_spec.rb</code>
</p><pre class="programlisting prettyprint lang-txt">cd /path/to/logstash-codec-mypluginname
mv logstash-codec-example.gemspec logstash-codec-mypluginname.gemspec
mv lib/logstash/codec/example.rb lib/logstash/codec/mypluginname.rb
mv spec/codecs/example_spec.rb spec/codecs/mypluginname_spec.rb</pre></li></ul></div></li></ol></div><p>Your file structure should look like this:</p><pre class="programlisting prettyprint lang-txt">$ tree logstash-codec-mypluginname
├── Gemfile
├── LICENSE
├── README.md
├── Rakefile
├── lib
│   └── logstash
│       └── codecs
│           └── mypluginname.rb
├── logstash-codec-mypluginname.gemspec
└── spec
    └── codecs
        └── mypluginname_spec.rb</pre><p>For more information about the Ruby gem file structure and an excellent
walkthrough of the Ruby gem creation process, see
<a class="ulink" href="http://timelessrepo.com/making-ruby-gems" target="_top">http://timelessrepo.com/making-ruby-gems</a></p><h3><a id="_see_what_your_plugin_looks_like_2"></a>See what your plugin looks like<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Before we dive into the details, open up the plugin file in your favorite text editor
and take a look.</p><pre class="programlisting prettyprint lang-ruby"># encoding: utf-8
require "logstash/codecs/base"
require "logstash/namespace"
require "stud/interval"
require "socket" # for Socket.gethostname

# Add any asciidoc formatted documentation here
# Generate a repeating message.
#
# This plugin is intended only as an example.

class LogStash::Codecs::Example &lt; LogStash::Codecs::Base
  config_name "example"

  # If undefined, Logstash will complain, even if codec is unused.
  default :codec, "plain"

  # The message string to use in the event.
  config :message, :validate =&gt; :string, :default =&gt; "Hello World!"

  # Set how frequently messages should be sent.
  #
  # The default, `1`, means send a message every second.
  config :interval, :validate =&gt; :number, :default =&gt; 1

  public
  def register
    @host = Socket.gethostname
  end # def register

  def run(queue)
    Stud.interval(@interval) do
      event = LogStash::Event.new("message" =&gt; @message, "host" =&gt; @host)
      decorate(event)
      queue &lt;&lt; event
    end # loop
  end # def run

end # class LogStash::Codecs::Example</pre><pre class="programlisting prettyprint lang-ruby"># encoding: utf-8
require "logstash/codecs/base"
require "logstash/codecs/line"

# Add any asciidoc formatted documentation here
class LogStash::Codecs::Example &lt; LogStash::Codecs::Base

  # This example codec will append a string to the message field
  # of an event, either in the decoding or encoding methods
  #
  # This is only intended to be used as an example.
  #
  # input {
  #   stdin { codec =&gt; example }
  # }
  #
  # or
  #
  # output {
  #   stdout { codec =&gt; example }
  # }
  config_name "example"

  # Append a string to the message
  config :append, :validate =&gt; :string, :default =&gt; ', Hello World!'

  public
  def register
    @lines = LogStash::Codecs::Line.new
    @lines.charset = "UTF-8"
  end

  public
  def decode(data)
    @lines.decode(data) do |line|
      replace = { "message" =&gt; line["message"].to_s + @append }
      yield LogStash::Event.new(replace)
    end
  end # def decode

  public
  def encode(event)
    @on_event.call(event, event["message"].to_s + @append + NL)
  end # def encode

end # class LogStash::Codecs::Example</pre><h2><a id="_coding_codec_plugins"></a>Coding codec plugins<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>Now let’s take a line-by-line look at the example plugin.</p><h3><a id="_literal_encoding_literal_2"></a><code class="literal">encoding</code><a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>It seems like a small thing, but remember to specify the encoding at the
beginning of your plugin code:</p><pre class="programlisting prettyprint lang-sh"># encoding: utf-8</pre><p>Logstash depends on things being in UTF-8, so we put this here to tell the Ruby
interpreter that we’re going to be using the UTF-8 encoding.</p><h3><a id="_literal_require_literal_statements_2"></a><code class="literal">require</code> Statements<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Logstash codec plugins require parent classes defined in
<code class="literal">logstash/codecs/base</code> and logstash/namespace:</p><pre class="programlisting prettyprint lang-ruby">require "logstash/codecs/base"
require "logstash/namespace"</pre><p>Of course, the plugin you build may depend on other code, or even gems. Just put
them here along with these Logstash dependencies.</p><h3><a id="_plugin_body_2"></a>Plugin Body<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Let’s go through the various elements of the plugin itself.</p><h4><a id="_inline_documentation_2"></a>Inline Documentation<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Logstash provides infrastructure to automatically generate documentation for
plugins. We use the asciidoc format to write documentation so <span class="emphasis"><em>any</em></span> comments in
the source code will be first converted into asciidoc and then into html.</p><p>All plugin documentation is then rendered and placed in
<a class="ulink" href="http://www.elasticsearch.org/guide/en/logstash/current/index.html" target="_top">the Logstash section of the Elasticsearch Guide</a>.</p><p>The inline documentation can include code blocks and config examples! To include
Ruby code, use the asciidoc <code class="literal">[source,ruby]</code> directive:</p><pre class="programlisting prettyprint lang-txt"># Using hashes:
# [source,ruby]
# ----------------------------------
# match =&gt; {
#  "field1" =&gt; "value1"
#  "field2" =&gt; "value2"
#  ...
# }
# ----------------------------------</pre><p>In the rendered html document, this block would look like:</p><div class="informalexample"><p>Using hashes:</p><pre class="programlisting prettyprint lang-ruby">match =&gt; {
  "field1" =&gt; "value1"
  "field2" =&gt; "value2"
  ...
 }</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>For more asciidoc formatting tips, see the excellent reference at
<a class="ulink" href="https://github.com/elasticsearch/docs#asciidoc-guide" target="_top">https://github.com/elasticsearch/docs#asciidoc-guide</a></p></div></div><h3><a id="_literal_class_literal_declaration_2"></a><code class="literal">class</code> Declaration<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The codec plugin class should be a subclass of
<code class="literal">LogStash::Codecs::Base</code>:</p><pre class="programlisting prettyprint lang-ruby">class LogStash::Codecs::Example &lt; LogStash::Codecs::Base</pre><p>The class name should closely mirror the plugin name, for example:</p><pre class="programlisting prettyprint lang-ruby">LogStash::Codecs::Example</pre><h3><a id="_literal_config_name_literal_2"></a><code class="literal">config_name</code><a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><pre class="programlisting prettyprint lang-ruby">  config_name "example"</pre><p>This is the name your plugin will call inside the codec configuration
block.</p><p>If you set <code class="literal">config_name "example"</code> in your plugin code,
the corresponding Logstash configuration block would need to look like this:</p><pre class="programlisting prettyprint lang-js">input {
  codec =&gt; example {...}
}</pre><p>Or if using the codec in an output block:</p><pre class="programlisting prettyprint lang-js">output {
  codec =&gt; example {...}
}</pre><h3><a id="_configuration_parameters_2"></a>Configuration Parameters<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><pre class="programlisting prettyprint lang-ruby">  config :variable_name, :validate =&gt; :variable_type, :default =&gt; "Default value", :required =&gt; boolean, :deprecated =&gt; boolean</pre><p>The configuration, or <code class="literal">config</code> section allows you to define as many (or as few)
parameters as are needed to enable Logstash to process events.</p><p>There are several configuration attributes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">:validate</code> - allows you to enforce passing a particular data type to Logstash
for this configuration option, such as <code class="literal">:string</code>, <code class="literal">:password</code>, <code class="literal">:boolean</code>,
<code class="literal">:number</code>, <code class="literal">:array</code>, <code class="literal">:hash</code>, <code class="literal">:path</code> (a file-system path), <code class="literal">:codec</code> (since
1.2.0), <code class="literal">:bytes</code> (starting in 1.5.0).  Note that this also works as a coercion
in that if I specify "true" for boolean (even though technically a string), it
will become a valid boolean in the config.  This coercion works for the
<code class="literal">:number</code> type as well where "1.2" becomes a float and "22" is an integer.
</li><li class="listitem">
<code class="literal">:default</code> - lets you specify a default value for a parameter
</li><li class="listitem">
<code class="literal">:required</code> - whether or not this parameter is mandatory (a Boolean <code class="literal">true</code> or
<code class="literal">false</code>)
</li><li class="listitem">
<code class="literal">:deprecated</code> - informational (also a Boolean <code class="literal">true</code> or <code class="literal">false</code>)
</li></ul></div><h3><a id="_plugin_methods_2"></a>Plugin Methods<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Logstash codecs must implement the <code class="literal">register</code> method, and the <code class="literal">decode</code> method or the <code class="literal">encode</code> method (or both).</p><h4><a id="_literal_register_literal_method_2"></a><code class="literal">register</code> Method<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><pre class="programlisting prettyprint lang-ruby">  public
  def register
  end # def register</pre><p>The Logstash <code class="literal">register</code> method is like an <code class="literal">initialize</code> method. It was originally
created to enforce having <code class="literal">super</code> called, preventing headaches for newbies.
(Note: It may go away in favor of <code class="literal">initialize</code>, in conjunction with some
enforced testing to ensure <code class="literal">super</code> is called.)</p><p><code class="literal">public</code> means the method can be called anywhere, not just within the class.
This is the default behavior for methods in Ruby, but it is specified explicitly
here anyway.</p><p>You can also assign instance variables here (variables prepended by <code class="literal">@</code>).
Configuration variables are now in scope as instance variables, like <code class="literal">@message</code></p><h4><a id="_literal_decode_literal_method"></a><code class="literal">decode</code> Method<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><pre class="programlisting prettyprint lang-ruby">  public
  def decode(data)
    @lines.decode(data) do |line|
      replace = { "message" =&gt; line["message"].to_s + @append }
      yield LogStash::Event.new(replace)
    end
  end # def decode</pre><p>The codec’s <code class="literal">decode</code> method is where data coming in from an input is transformed
into an event.  There are complex examples like the
<a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-collectd/blob/master/lib/logstash/codecs/collectd.rb#L386-L484" target="_top">collectd</a>
codec, and simpler examples like the <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-spool/blob/master/lib/logstash/codecs/spool.rb#L11-L16" target="_top">spool</a>
codec.</p><p>There must be a <code class="literal">yield</code> statement as part of the <code class="literal">decode</code> method which will
return decoded events to the pipeline.</p><h4><a id="_literal_encode_literal_method"></a><code class="literal">encode</code> Method<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><pre class="programlisting prettyprint lang-ruby">  public
  def encode(event)
    @on_event.call(event, event["message"].to_s + @append + NL)
  end # def encode</pre><p>The <code class="literal">encode</code> method takes an event and serializes it (<span class="emphasis"><em>encodes</em></span>) into another
format.  Good examples of <code class="literal">encode</code> methods include the simple <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-plain/blob/master/lib/logstash/codecs/plain.rb#L39-L46" target="_top">plain</a>
codec, the slightly more involved <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-msgpack/blob/master/lib/logstash/codecs/msgpack.rb#L38-L46" target="_top">msgpack</a>
codec, and even an <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-avro/blob/master/lib/logstash/codecs/avro.rb#L38-L45" target="_top">avro</a>
codec.</p><p>In most cases, your <code class="literal">encode</code> method should have an <code class="literal">@on_event.call()</code> statement.
This call will output data per event in the described way.</p><h4><a id="_literal_run_literal_method_2"></a><code class="literal">run</code> Method<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The example input plugin has the following <code class="literal">run</code> Method:</p><pre class="programlisting prettyprint lang-ruby">  def run(queue)
    Stud.interval(@interval) do
      event = LogStash::Event.new("message" =&gt; @message, "host" =&gt; @host)
      decorate(event)
      queue &lt;&lt; event
    end # loop
  end # def run</pre><p>The <code class="literal">run</code> method is where a stream of data from an input becomes an event.</p><p>The stream can be plain or generated as with the
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-heartbeat/blob/master/lib/logstash/inputs/heartbeat.rb#L43-L61" target="_top">heartbeat</a>
input plugin.  In these cases, though no codec is used,
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-heartbeat/blob/master/lib/logstash/inputs/heartbeat.rb#L17" target="_top">a default codec</a>
must be set in the code to avoid errors.</p><p>Here’s another example <code class="literal">run</code> method:</p><pre class="programlisting prettyprint lang-ruby">  def run(queue)
    while true
      begin
        # Based on some testing, there is no way to interrupt an IO.sysread nor
        # IO.select call in JRuby.
        data = $stdin.sysread(16384)
        @codec.decode(data) do |event|
          decorate(event)
          event["host"] = @host if !event.include?("host")
          queue &lt;&lt; event
        end
      rescue IOError, EOFError, LogStash::ShutdownSignal
        # stdin closed or a requested shutdown
        break
      end
    end # while true
    finished
  end # def run</pre><p>In this example, the <code class="literal">data</code> is being sent to the codec defined in the
configuration block to <code class="literal">decode</code> the data stream and return an event.</p><p>In both examples, the resulting <code class="literal">event</code> is passed to the <code class="literal">decorate</code> method:</p><pre class="programlisting prettyprint lang-ruby">      decorate(event)</pre><p>This applies any tags you might have set in the input configuration block. For
example, <code class="literal">tags =&gt; ["tag1", "tag2"]</code>.</p><p>Also in both examples, the <code class="literal">event</code>, after being "decorated," is appended to the
queue:</p><pre class="programlisting prettyprint lang-ruby">      queue &lt;&lt; event</pre><p>This inserts the event into the pipeline.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Because input plugins can range from simple to complex, it is helpful to see
more examples of how they have been created:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-syslog/blob/master/lib/logstash/inputs/syslog.rb" target="_top">syslog</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-zeromq/blob/master/lib/logstash/inputs/zeromq.rb" target="_top">zeromq</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-stdin/blob/master/lib/logstash/inputs/stdin.rb" target="_top">stdin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/logstash-plugins/logstash-input-tcp/blob/master/lib/logstash/inputs/tcp.rb" target="_top">tcp</a>
</li></ul></div><p>There are many more more examples in the <a class="ulink" href="https://github.com/logstash-plugins?query=logstash-input" target="_top">logstash-plugin github repository</a>.</p></div></div><h4><a id="_literal_teardown_literal_method_2"></a><code class="literal">teardown</code> Method<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><pre class="programlisting prettyprint lang-ruby">  public
  def teardown
    @udp.close if @udp &amp;&amp; !@udp.closed?
  end</pre><p>The <code class="literal">teardown</code> method is not present in all input or output plugins.  It is
called when a shutdown happens to ensure that sockets, files, connections and
threads are all closed down properly.  If your plugin uses these connections,
you should include a teardown method.</p><h2><a id="_building_the_plugin_2"></a>Building the Plugin<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>At this point in the process you have coded your plugin and are ready to build
a Ruby Gem from it.  The following steps will help you complete the process.</p><h3><a id="_add_a_gemfile_2"></a>Add a Gemfile<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Gemfiles allow Ruby’s Bundler to maintain the dependencies for your plugin.
Currently, all we’ll need is the Logstash gem, for testing, but if you require
other gems, you should add them in here.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>See <a class="ulink" href="http://bundler.io/gemfile.html" target="_top">Bundler’s Gemfile page</a> for more details.</p></div></div><pre class="programlisting prettyprint lang-ruby">source 'https://rubygems.org'
gemspec
gem "logstash", :github =&gt; "elasticsearch/logstash", :branch =&gt; "1.5"</pre><h3><a id="_add_a_literal_gemspec_literal_file_2"></a>Add a <code class="literal">gemspec</code> file<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Gemspecs define the Ruby gem which will be built and contain your plugin.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>More information can be found on the
<a class="ulink" href="http://guides.rubygems.org/specification-reference/" target="_top">Rubygems Specification page</a>.</p></div></div><pre class="programlisting prettyprint lang-ruby">Gem::Specification.new do |s|
  s.name = 'logstash-codec-example'
  s.version = '0.1.0'
  s.licenses = ['Apache License (2.0)']
  s.summary = "This codec does x, y, z in Logstash"
  s.description = "This gem is a logstash plugin required to be installed on top of the Logstash core pipeline using $LS_HOME/bin/plugin install gemname. This gem is not a stand-alone program"
  s.authors = ["Elasticsearch"]
  s.email = 'info@elasticsearch.com'
  s.homepage = "http://www.elasticsearch.org/guide/en/logstash/current/index.html"
  s.require_paths = ["lib"]

  # Files
  s.files = `git ls-files`.split($\)
   # Tests
  s.test_files = s.files.grep(%r{^(test|spec|features)/})

  # Special flag to let us know this is actually a logstash plugin
  s.metadata = { "logstash_plugin" =&gt; "true", "logstash_group" =&gt; "codec" }

  # Gem dependencies
  s.add_runtime_dependency 'logstash', '&gt;= 1.4.0', '&lt; 2.0.0'
  s.add_development_dependency 'logstash-devutils'
end</pre><p>It is appropriate to change these values to fit your plugin. In particular,
<code class="literal">s.name</code> and <code class="literal">s.summary</code> shoud reflect your plugin’s name and behavior.</p><p><code class="literal">s.licenses</code> and <code class="literal">s.version</code> are also important and will come into play when
you are ready to publish your plugin.</p><p>Logstash and all its plugins are licensed under
<a class="ulink" href="https://github.com/elasticsearch/logstash/blob/master/LICENSE" target="_top">Apache License, version 2 ("ALv2")</a>.
If you make your plugin publicly available via <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a>,
please make sure to have this line in your gemspec:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.licenses = ['Apache License (2.0)']</code>
</li></ul></div><p>The gem version, designated by <code class="literal">s.version</code>, helps track changes to plugins over
time.</p><p><span class="strong"><strong>Version messaging from Logstash</strong></span></p><p>If you start Logstash with the <code class="literal">--verbose</code> flag, you will see messages like
these to indicate the relative maturity indicated by the plugin version number:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<span class="strong"><strong>0.1.x</strong></span>
</p><pre class="screen">This plugin isn't well supported by the community and likely has no maintainer.</pre></li><li class="listitem"><p class="simpara">
<span class="strong"><strong>0.9.x</strong></span>
</p><pre class="screen">This plugin should work but would benefit from use by folks like you. Please let us know if you find bugs or have suggestions on how to improve this plugin.</pre></li><li class="listitem">
<span class="strong"><strong>1.x.x</strong></span>
You will no longer see a message indicating potential code immaturity when a
plugin reaches version 1.0.0
</li></ul></div><h4><a id="_runtime_amp_development_dependencies_2"></a>Runtime &amp; Development Dependencies<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>At the bottom of the <code class="literal">gemspec</code> file is a section with a comment:
<code class="literal">Gem dependencies</code>.  This is where any other needed gems must be mentioned. If
a gem is necessary for your plugin to function, it is a runtime dependency. If
a gem are only used for testing, then it would be a development dependency.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>You can also have versioning requirements for your dependencies—including other
Logstash plugins:</p><pre class="programlisting prettyprint lang-ruby">  # Gem dependencies
  s.add_runtime_dependency 'logstash', '&gt;= 1.4.0', '&lt; 2.0.0'
  s.add_development_dependency 'logstash-devutils'</pre><p>This gemspec has a runtime dependency on the core Logstash gem and requires that
it have a version number greater than or equal to version 1.4.0 <code class="literal">'&gt;= 1.4.0'</code>,
and less than version 2.0 <code class="literal">'&lt; 2.0.0'</code>.</p></div></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>All plugins have a runtime dependency on the <code class="literal">logstash</code> core gem, and
a development dependency on <code class="literal">logstash-devutils</code>.</p></div></div><h3><a id="_add_tests_2"></a>Add Tests<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Logstash loves tests. Lots of tests. If you’re using your new codec
plugin in a production environment, you’ll want to have some tests to ensure you
are not breaking any existing functionality.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>A full exposition on RSpec is outside the scope of this document. Learn
more about RSpec at <a class="ulink" href="http://rspec.info" target="_top">http://rspec.info</a></p></div></div><p>For help learning about tests and testing, look in the
<code class="literal">spec/codecs/</code> directory of several other similar
plugins.</p><h3><a id="_clone_and_test_2"></a>Clone and test!<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Now let’s start with a fresh clone of the plugin, build it and run the tests.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<span class="strong"><strong>Clone your plugin into a temporary location</strong></span> Replace <code class="literal">GITUSERNAME</code> with
your github username, and <code class="literal">MYPLUGINNAME</code> with your plugin name.
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
<code class="literal">git clone https://github.com/GITUSERNAME/logstash-</code><code class="literal">codec-MYPLUGINNAME.git</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
alternately, via ssh: <code class="literal">git clone git@github.com:GITUSERNAME/logstash-</code><code class="literal">codec-MYPLUGINNAME.git</code>
</li></ul></div></li><li class="listitem">
<code class="literal">cd logstash-codec-MYPLUGINNAME</code>
</li></ul></div></li></ul></div><p>Then, you’ll need to install your plugins dependencies with bundler:</p><pre class="screen">bundle install</pre><p>And finally, run the tests:</p><pre class="screen">bundle exec rspec</pre><p>You should see a success message, which looks something like this:</p><pre class="screen">Finished in 0.034 seconds
1 example, 0 failures</pre><p>Hooray! You’re almost there! (Unless you saw failures… you should fix those
  first).</p><h3><a id="_building_and_testing_2"></a>Building and Testing<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Now you’re ready to build your (well-tested) plugin into a Ruby gem.</p><h4><a id="_build_2"></a>Build<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>You already have all the necessary ingredients, so let’s go ahead and run the
build command:</p><pre class="programlisting prettyprint lang-sh">gem build logstash-codec-example.gemspec</pre><p>That’s it!  Your gem should be built and be in the same path with the name</p><pre class="programlisting prettyprint lang-sh">logstash-codec-mypluginname-0.1.0.gem</pre><p>The <code class="literal">s.version</code> number from your gemspec file will provide the gem version, in
this case, <code class="literal">0.1.0</code>.</p><h4><a id="_test_installation_2"></a>Test installation<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>You should test install your plugin into a clean installation of Logstash.
Download the latest version from the
<a class="ulink" href="http://www.elasticsearch.org/overview/logstash/download/" target="_top">Logstash downloads page</a>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Untar and cd in to the directory:
</p><pre class="programlisting prettyprint lang-sh">curl -O http://download.elasticsearch.org/logstash/logstash/logstash-1.5.0.beta1.tar.gz
tar xzvf logstash-1.5.0.beta1.tar.gz
cd logstash-1.5.0.beta1</pre></li><li class="listitem"><p class="simpara">
Using the plugin tool, we can install the gem we just built.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Replace <code class="literal">/my/logstash/plugins</code> with  the correct path to the gem for your
environment, and <code class="literal">0.1.0</code> with the correct version number from the gemspec file.
</p><pre class="programlisting prettyprint lang-sh">bin/plugin install /my/logstash/plugins/logstash-codec-example/logstash-codec-example-0.1.0.gem</pre></li><li class="listitem"><p class="simpara">
After running this, you should see feedback from Logstash that it was
successfully installed:
</p><pre class="programlisting prettyprint lang-sh">validating /my/logstash/plugins/logstash-codec-example/logstash-codec-example-0.1.0.gem &gt;= 0
Valid logstash plugin. Continuing...
Successfully installed 'logstash-codec-example' with version '0.1.0'</pre><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>You can also use the Logstash plugin tool to determine which plugins are
currently available:</p><pre class="programlisting prettyprint lang-sh">bin/plugin list</pre><p>Depending on what you have installed, you might see a short or long list of
plugins: inputs, codecs, filters and outputs.</p></div></div></li></ul></div></li><li class="listitem">
Now try running Logstash with a simple configuration passed in via the
command-line, using the <code class="literal">-e</code> flag.
</li></ol></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Your results will depend on what your codec plugin is designed to do.</p></div></div><pre class="programlisting prettyprint lang-sh">bin/logstash -e 'input { example{} } output {stdout { codec =&gt; rubydebug }}'</pre><p>The example codec plugin will send the contents of <code class="literal">message</code> (with a
default message of "Hello World!") every second.</p><pre class="programlisting prettyprint lang-sh">{
       "message" =&gt; "Hello World!",
      "@version" =&gt; "1",
    "@timestamp" =&gt; "2015-01-27T19:17:18.932Z",
          "host" =&gt; "cadenza"
}</pre><p>Feel free to experiment and test this by changing the <code class="literal">message</code> and <code class="literal">interval</code> parameters:</p><pre class="programlisting prettyprint lang-sh">bin/logstash -e 'input { example{ message =&gt; "A different message" interval =&gt; 5 } } output {stdout { codec =&gt; rubydebug }}'</pre><pre class="programlisting prettyprint lang-sh">bin/logstash -e 'input { stdin{ codec =&gt; example{}} } output {stdout { codec =&gt; rubydebug }}'</pre><p>The example codec plugin will append the contents of <code class="literal">append</code> (which
by default appends ", Hello World!")</p><p>After starting Logstash, type something, for example "Random output string".
The resulting output message field contents should be,
"Random output string, Hello World!":</p><pre class="programlisting prettyprint lang-sh">Random output string
{
       "message" =&gt; "Random output string, Hello World!",
      "@version" =&gt; "1",
    "@timestamp" =&gt; "2015-01-27T19:17:18.932Z",
          "host" =&gt; "cadenza"
}</pre><p>Feel free to experiment and test this by changing the <code class="literal">append</code> parameter:</p><pre class="programlisting prettyprint lang-sh">bin/logstash -e 'input { stdin{ codec =&gt; example{ append =&gt; ", I am appending this! }} } output {stdout { codec =&gt; rubydebug }}'</pre><p>Congratulations! You’ve built, deployed and successfully run a Logstash
codec.</p><h2><a id="_submitting_your_plugin_to_ulink_url_http_rubygems_org_rubygems_org_ulink_and_ulink_url_https_github_com_logstash_plugins_logstash_plugins_ulink_2"></a>Submitting your plugin to <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a> and <a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a><a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>Logstash uses <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a> as its repository for all plugin
artifacts. Once you have developed your new plugin, you can make it available to
Logstash users by simply publishing it to RubyGems.org.</p><h3><a id="_licensing_2"></a>Licensing<a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Logstash and all its plugins are licensed under
<a class="ulink" href="https://github.com/elasticsearch/logstash/blob/master/LICENSE" target="_top">Apache License, version 2 ("ALv2")</a>.
If you make your plugin publicly available via <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a>,
please make sure to have this line in your gemspec:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.licenses = ['Apache License (2.0)']</code>
</li></ul></div><h3><a id="_publishing_to_ulink_url_http_rubygems_org_rubygems_org_ulink_2"></a>Publishing to <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a><a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>To begin, you’ll need an account on RubyGems.org</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://rubygems.org/sign_up" target="_top">Sign-up for a RubyGems account</a>.
</li></ul></div><p>After creating an account,
<a class="ulink" href="http://guides.rubygems.org/rubygems-org-api/#api-authorization" target="_top">obtain</a> an API
key from RubyGems.org. By default, RubyGems uses the file <code class="literal">~/.gem/credentials</code>
to store your API key. These credentials will be used to publish the gem.
Replace <code class="literal">username</code> and <code class="literal">password</code> with the credentials you created at
RubyGems.org:</p><pre class="programlisting prettyprint lang-sh">curl -u username:password https://rubygems.org/api/v1/api_key.yaml &gt; ~/.gem/credentials
chmod 0600 ~/.gem/credentials</pre><p>Before proceeding, make sure you have the right version in your gemspec file
and commit your changes.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.version = '0.1.0'</code>
</li></ul></div><p>To publish version 0.1.0 of your new logstash gem:</p><pre class="programlisting prettyprint lang-sh">bundle install
bundle exec rake vendor
bundle exec rspec
bundle exec rake publish_gem</pre><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Executing <code class="literal">rake publish_gem</code>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Reads the version from the gemspec file (<code class="literal">s.version = '0.1.0'</code>)
</li><li class="listitem">
Checks in your local repository if a tag exists for that version. If the tag
already exists, it aborts the process. Otherwise, it creates a new version tag
in your local repository.
</li><li class="listitem">
Builds the gem
</li><li class="listitem">
Publishes the gem to RubyGems.org
</li></ol></div></div></div><p>That’s it! Your plugin is published! Logstash users can now install your plugin
by running:</p><pre class="programlisting prettyprint lang-sh">bin/plugin install logstash-codec-mypluginname</pre><h3><a id="_contributing_your_source_code_to_ulink_url_https_github_com_logstash_plugins_logstash_plugins_ulink_2"></a>Contributing your source code to <a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a><a href="https://github.com/elasticsearch/logstash-docs/edit/master/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>It is not required to contribute your source code to
<a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a> github organization, but
we always welcome new plugins!</p><p>To migrate your plugin to logstash-plugins,
simply create a new <a class="ulink" href="https://github.com/elasticsearch/logstash/issues" target="_top">issue</a> in
the Logstash repository. We will facilitate the move to the logstash-plugins
organization using the recommended
<a class="ulink" href="https://help.github.com/articles/transferring-a-repository/#transferring-from-a-user-to-an-organization" target="_top">github process</a>.</p></div><div class="navfooter"><span class="prev"><a href="_how_to_write_a_logstash_input_plugin.html">
              « 
              How to write a Logstash input plugin</a>
           
        </span><span class="next">
           
          <a href="_how_to_write_a_logstash_filter_plugin.html">How to write a Logstash filter plugin
               »
            </a></span></div></article></section></div></div></div><footer><div id="footer_container" class="full_wrapper"><div class="container"><nav role="navigation"><ul id="footer_nav" class="menu"><li id="menu-item-36" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-36"><a target="_blank" href="http://elasticsearch.com">Company</a></li><li id="menu-item-74980" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-74980"><a href="/resources/">Resources</a></li><li id="menu-item-3106" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3106"><a href="/terms-of-use/">Terms</a></li><li id="menu-item-3107" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3107"><a href="/privacy-and-cookie-policy/">Privacy</a></li><li id="menu-item-3105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3105"><a href="/contact/">Contact</a></li><li id="menu-item-39" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-39"><a href="/blog/">Blog</a></li></ul></nav><div id="social"><a href="https://twitter.com/elasticsearch" class="social_icons" target="_blank"><i class="twitter"></i></a><a href="https://www.facebook.com/elasticsearch" class="social_icons" target="_blank"><i class="facebook"></i></a></div><div id="footer_form"><label class="form_label">Sign up for updates!</label><div class="gf_browser_chrome gform_wrapper" id="gform_wrapper_4"><a id="gf_4" name="gf_4" class="gform_anchor"></a><form method="post" enctype="multipart/form-data" target="gform_ajax_frame_4" id="gform_4" action="/empty-template/#gf_4"><div class="gform_body"><ul id="gform_fields_4" class="gform_fields top_label description_below"><li id="field_4_6" class="gfield               gfield_contains_required"><label class="gfield_label" for="input_4_6">enter you email<span class="gfield_required">*</span></label><div class="ginput_container"><input name="input_6" id="input_4_6" type="email" value="" class="medium" tabindex="50" /></div></li><li id="field_4_2" class="gfield     gform_hidden"><input name="input_2" id="input_4_2" type="hidden" class="gform_hidden" value="813-MAM-392" /></li><li id="field_4_3" class="gfield     gform_hidden"><input name="input_3" id="input_4_3" type="hidden" class="gform_hidden" value="WEB.org" /></li><li id="field_4_4" class="gfield     gform_hidden"><input name="input_4" id="input_4_4" type="hidden" class="gform_hidden" value="WEB.org - Footer - Updates" /></li></ul></div><script type="text/javascript">//<![CDATA[
            jQuery(function(){
                jQuery('#gform_submit_button_4').click( function() {
                    if(window["gf_submitting_4"]){
                        return false;
                    }
                    if( !jQuery("#gform_4")[0].checkValidity || jQuery("#gform_4")[0].checkValidity()){
                        window["gf_submitting_4"]=true;
                    }
                });
            });
            //]]></script><div class="gform_footer top_label"><input type="submit" id="gform_submit_button_4" class="button gform_button" value="Submit" tabindex="51" /><input type="hidden" name="gform_ajax" value="form_id=4&amp;title=&amp;description=" /><input type="hidden" class="gform_hidden" name="is_submit_4" value="1" /><input type="hidden" class="gform_hidden" name="gform_submit" value="4" /><input type="hidden" class="gform_hidden" name="gform_unique_id" value="" /><input type="hidden" class="gform_hidden" name="state_4" value="WyJhOjA6e30iLCJmMjE2MmM2ZjUxYmQ4M2Q3ZmMzNzVlNmY2ODYyZTI2NCJd" /><input type="hidden" class="gform_hidden" name="gform_target_page_number_4" id="gform_target_page_number_4" value="0" /><input type="hidden" class="gform_hidden" name="gform_source_page_number_4" id="gform_source_page_number_4" value="1" /><input type="hidden" name="gform_field_values" value="" /></div></form></div><iframe style="display:none;width:0px; height:0px;" src="about:blank" name="gform_ajax_frame_4" id="gform_ajax_frame_4"></iframe><script type="text/javascript">//<![CDATA[
                    function gformInitSpinner_4(){jQuery('#gform_4').submit(function(){if(jQuery('#gform_ajax_spinner_4').length == 0){jQuery('#gform_submit_button_4, #gform_wrapper_4 .gform_next_button, #gform_wrapper_4 .gform_image_button').after('<' + 'img id="gform_ajax_spinner_4"  class="gform_ajax_spinner" src="//www.elasticsearch.org/content/plugins/gravityforms/images/spinner.gif" alt="" />'); }} );}jQuery(document).ready(function($){gformInitSpinner_4();jQuery('#gform_ajax_frame_4').load( function(){var contents = jQuery(this).contents().find('*').html();var is_postback = contents.indexOf('GF_AJAX_POSTBACK') >= 0;if(!is_postback){return;}var form_content = jQuery(this).contents().find('#gform_wrapper_4');var is_redirect = contents.indexOf('gformRedirect(){') >= 0;var is_form = !(form_content.length <= 0 || is_redirect);if(is_form){jQuery('#gform_wrapper_4').html(form_content.html());jQuery(document).scrollTop(jQuery('#gform_wrapper_4').offset().top);if(window['gformInitDatepicker']) {gformInitDatepicker();}if(window['gformInitPriceFields']) {gformInitPriceFields();}var current_page = jQuery('#gform_source_page_number_4').val();gformInitSpinner_4();jQuery(document).trigger('gform_page_loaded', [4, current_page]);window['gf_submitting_4'] = false;}else if(!is_redirect){var confirmation_content = jQuery(this).contents().find('#gforms_confirmation_message').html();if(!confirmation_content){confirmation_content = contents;}setTimeout(function(){jQuery('#gform_wrapper_4').replaceWith('<' + 'div id=\'gforms_confirmation_message\' class=\'gform_confirmation_message_4\'' + '>' + confirmation_content + '<' + '/div' + '>');jQuery(document).scrollTop(jQuery('#gforms_confirmation_message').offset().top);jQuery(document).trigger('gform_confirmation_loaded', [4]);window['gf_submitting_4'] = false;}, 50);}else{jQuery('#gform_4').append(contents);if(window['gformRedirect']) {gformRedirect();}}jQuery(document).trigger('gform_post_render', [4, current_page]);} );} );</script><script type='text/javascript'> jQuery(document).ready(function(){jQuery(document).trigger('gform_post_render', [4, 1]) } );
                    //]]></script></div><div class="legal"><p>© 2014 All Rights Reserved - Elasticsearch </p><p>Apache Lucene and Lucene are trademarks of the Apache Software Foundation</p></div></div></div></footer><section id="cookie"><div class="container"><div class="eu">
                Elasticsearch uses cookies to provide a better user experience to visitors of our website. Read more about our cookie policy <a href="/privacy-and-cookie-policy/">here.</a><a data-action="accept" class="cta">Accept cookies</a></div><div class="uk">
                Elasticsearch uses cookies to provide a better user experience to visitors of our website. Read more about our cookie policy <a href="/privacy-and-cookie-policy/">here.</a><a data-action="dismiss" class="cta dismiss">X</a></div></div></section><script type="text/javascript">
      if (window.aiModifyParent) aiModifyParent();
      (function ($, $a, $title, $list) {
        $a = $('[id^="js-api-method-index"]');
        if (!$a.size()) return;
        $('.guide_content').addClass('js-client-docs');
        $list = $a.siblings('.itemizedlist').detach();
        $title = $(document.createElement('h2')).text('api methods')
        $a.parent().remove();
        $('.toc').first().append($(document.createElement('div')).addClass('js-api-method-index').append($title).append($list));
      }(jQuery));
    </script><script type="text/javascript">if(window.aiModifyParent) {aiModifyParent();}</script><script type="text/javascript" src="//www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="//www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script><script type="text/javascript" src="//s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201413"></script><script type="text/javascript" src="//www.elasticsearch.org/content/themes/elasticsearch-org/js/global.min.js?ver=1395082599"></script><script type="text/javascript" src="//www.elasticsearch.org/content/themes/elasticsearch-org/js/froogaloop.min.js?ver=1"></script></body></html>
