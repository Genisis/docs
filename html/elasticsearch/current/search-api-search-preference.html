<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Preference</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="search-api-request-body.html" title="Request Body" /><link rel="prev" href="search-api-search-scroll.html" title="Scroll" /><link rel="next" href="search-api-search-explain.html" title="Explain" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="search-api.html">Search APIs</a></span> &gt; <span class="breadcrumb-link"><a href="search-api-request-body.html">Request Body</a></span> &gt; <span class="breadcrumb-node">Preference</span></div><div class="navheader"><span class="prev"><a href="search-api-search-scroll.html">
              « 
              Scroll</a>
           
        </span><span class="next">
           
          <a href="search-api-search-explain.html">Explain
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-api-search-preference"></a>Preference</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-query.html">Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-from-size.html">From / Size</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-sort.html">Sort</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-fields.html">Fields</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-script-fields.html">Script Fields</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-filter.html">Filter</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-highlighting.html">Highlighting</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-rescore.html">Rescoring</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-search-type.html">Search Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-scroll.html">Scroll</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-preference.html">Preference</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-explain.html">Explain</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-version.html">Version</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-index-boost.html">Index Boost</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-min-score.html">min_score</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="search-api-search-named-filters.html">Named Filters</a></span></dt></dl></div><p>Controls a <code class="literal">preference</code> of which shard replicas to execute the search
request on. By default, the operation is randomized between the shard
replicas.</p><p>The <code class="literal">preference</code> can be set to:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">_primary</code>
</p>
</td><td valign="top">
<p>
        The operation will go and be executed only on the primary
        shards.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">_primary_first</code>
</p>
</td><td valign="top">
<p>
        The operation will go and be executed on the primary
        shard, and if not available (failover), will execute on other shards.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">_local</code>
</p>
</td><td valign="top">
<p>
        The operation will prefer to be executed on a local
        allocated shard if possible.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">_only_node:xyz</code>
</p>
</td><td valign="top">
<p>
        Restricts the search to execute only on a node with
        the provided node id (<code class="literal">xyz</code> in this case).
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">_prefer_node:xyz</code>
</p>
</td><td valign="top">
<p>
        Prefers execution on the node with the provided
        node id (<code class="literal">xyz</code> in this case) if applicable.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">_shards:2,3</code>
</p>
</td><td valign="top">
<p>
        Restricts the operation to the specified shards. (<code class="literal">2</code>
        and <code class="literal">3</code> in this case). This preference can be combined with other
        preferences but it has to appear first: <code class="literal">_shards:2,3;_primary</code>
</p>
</td></tr><tr><td valign="top">
<p>
Custom (string) value
</p>
</td><td valign="top">
<p>
        A custom value will be used to guarantee that
        the same shards will be used for the same custom value. This can help
        with "jumping values" when hitting different shards in different refresh
        states. A sample value can be something like the web session id, or the
        user name.
</p>
</td></tr></tbody></table></div></div><div class="navfooter"><span class="prev"><a href="search-api-search-scroll.html">
              « 
              Scroll</a>
           
        </span><span class="next">
           
          <a href="search-api-search-explain.html">Explain
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
