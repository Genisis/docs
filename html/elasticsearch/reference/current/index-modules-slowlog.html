<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Index Slow Log</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="index-modules.html" title="Index Modules" /><link rel="prev" href="index-modules-allocation.html" title="Index Shard Allocation" /><link rel="next" href="index-modules-merge.html" title="Merge" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span> &gt; <span class="breadcrumb-node">Index Slow Log</span></div><div class="navheader"><span class="prev"><a href="index-modules-allocation.html">
              « 
              Index Shard Allocation</a>
           
        </span><span class="next">
           
          <a href="index-modules-merge.html">Merge
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-slowlog"></a>Index Slow Log</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-analysis.html">Analysis</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-allocation.html">Index Shard Allocation</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-slowlog.html">Index Slow Log</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-merge.html">Merge</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-store.html">Store</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-mapper.html">Mapper</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-translog.html">Translog</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-cache.html">Cache</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-fielddata.html">Field data</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-codec.html">Codec module</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="index-modules-similarity.html">Similarity module</a></span></dt></dl></div><h3><a id="_search_slow_log"></a>Search Slow Log</h3><p>Shard level slow search log allows to log slow search (query and fetch
executions) into a dedicated log file.</p><p>Thresholds can be set for both the query phase of the execution, and
fetch phase, here is a sample:</p><pre class="programlisting prettyprint noescape lang-js">#index.search.slowlog.threshold.query.warn: 10s
#index.search.slowlog.threshold.query.info: 5s
#index.search.slowlog.threshold.query.debug: 2s
#index.search.slowlog.threshold.query.trace: 500ms

#index.search.slowlog.threshold.fetch.warn: 1s
#index.search.slowlog.threshold.fetch.info: 800ms
#index.search.slowlog.threshold.fetch.debug: 500ms
#index.search.slowlog.threshold.fetch.trace: 200ms</pre><p>By default, none are enabled (set to <code class="literal">-1</code>). Levels (<code class="literal">warn</code>, <code class="literal">info</code>,
<code class="literal">debug</code>, <code class="literal">trace</code>) allow to control under which logging level the log
will be logged. Not all are required to be configured (for example, only
<code class="literal">warn</code> threshold can be set). The benefit of several levels is the
ability to quickly "grep" for specific thresholds breached.</p><p>The logging is done on the shard level scope, meaning the execution of a
search request within a specific shard. It does not encompass the whole
search request, which can be broadcast to several shards in order to
execute. Some of the benefits of shard level logging is the association
of the actual execution on the specific machine, compared with request
level.</p><p>All settings are index level settings (and each index can have different
values for it), and can be changed in runtime using the index update
settings API.</p><p>The logging file is configured by default using the following
configuration (found in <code class="literal">logging.yml</code>):</p><pre class="programlisting prettyprint noescape lang-js">index_search_slow_log_file:
  type: dailyRollingFile
  file: ${path.logs}/${cluster.name}_index_search_slowlog.log
  datePattern: "'.'yyyy-MM-dd"
  layout:
    type: pattern
    conversionPattern: "[%d{ISO8601}][%-5p][%-25c] %m%n"</pre><h3><a id="_index_slow_log"></a>Index Slow log</h3><p>p.The indexing slow log, similar in functionality to the search slow
log. The log file is ends with <code class="literal">_index_indexing_slowlog.log</code>. Log and
the thresholds are configured in the elasticsearch.yml file in the same
way as the search slowlog. Index slowlog sample:</p><pre class="programlisting prettyprint noescape lang-js">#index.indexing.slowlog.threshold.index.warn: 10s
#index.indexing.slowlog.threshold.index.info: 5s
#index.indexing.slowlog.threshold.index.debug: 2s
#index.indexing.slowlog.threshold.index.trace: 500ms</pre><p>The index slow log file is configured by default in the <code class="literal">logging.yml</code>
file:</p><pre class="programlisting prettyprint noescape lang-js">index_indexing_slow_log_file:
    type: dailyRollingFile
    file: ${path.logs}/${cluster.name}_index_indexing_slowlog.log
    datePattern: "'.'yyyy-MM-dd"
    layout:
      type: pattern
      conversionPattern: "[%d{ISO8601}][%-5p][%-25c] %m%n"</pre></div><div class="navfooter"><span class="prev"><a href="index-modules-allocation.html">
              « 
              Index Shard Allocation</a>
           
        </span><span class="next">
           
          <a href="index-modules-merge.html">Merge
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
