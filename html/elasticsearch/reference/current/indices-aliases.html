<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Index Aliases</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="indices.html" title="Indices APIs" /><link rel="prev" href="indices-delete-mapping.html" title="Delete Mapping" /><link rel="next" href="indices-update-settings.html" title="Update Indices Settings" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span> &gt; <span class="breadcrumb-node">Index Aliases</span></div><div class="navheader"><span class="prev"><a href="indices-delete-mapping.html">
              « 
              Delete Mapping</a>
           
        </span><span class="next">
           
          <a href="indices-update-settings.html">Update Indices Settings
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-aliases"></a>Index Aliases</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-create-index.html">Create Index</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-delete-index.html">Delete Index</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-exists.html">Indices Exists</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-open-close.html">Open / Close Index API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-put-mapping.html">Put Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-get-mapping.html">Get Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-types-exists.html">Types Exists</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-delete-mapping.html">Delete Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-aliases.html">Index Aliases</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-update-settings.html">Update Indices Settings</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-get-settings.html">Get Settings</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-analyze.html">Analyze</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-templates.html">Index Templates</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-warmers.html">Warmers</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-status.html">Status</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-stats.html">Indices Stats</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-segments.html">Indices Segments</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-clearcache.html">Clear Cache</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-flush.html">Flush</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-refresh.html">Refresh</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-optimize.html">Optimize</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-gateway-snapshot.html">Gateway Snapshot</a></span></dt></dl></div><p>APIs in elasticsearch accept an index name when working against a
specific index, and several indices when applicable. The index aliases
API allow to alias an index with a name, with all APIs automatically
converting the alias name to the actual index name. An alias can also be
mapped to more than one index, and when specifying it, the alias will
automatically expand to the aliases indices. An alias can also be
associated with a filter that will automatically be applied when
searching, and routing values.</p><p>Here is a sample of associating the alias <code class="literal">alias1</code> with index <code class="literal">test1</code>:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } }
    ]
}'</pre><p>An alias can also be removed, for example:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } }
    ]
}'</pre><p>Renaming an alias is a simple <code class="literal">remove</code> then <code class="literal">add</code> operation within the
same API. This operation is atomic, no need to worry about a short
period of time where the alias does not point to an index:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test1", "alias" : "alias2" } }
    ]
}'</pre><p>Associating an alias with more than one index are simply several <code class="literal">add</code>
actions:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test2", "alias" : "alias1" } }
    ]
}'</pre><p>It is an error to index to an alias which points to more than one index.</p><h3><a id="_filtered_aliases"></a>Filtered Aliases</h3><p>Aliases with filters provide an easy way to create different "views" of
the same index. The filter can be defined using Query DSL and is applied
to all Search, Count, Delete By Query and More Like This operations with
this alias. Here is an example:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        {
            "add" : {
                 "index" : "test1",
                 "alias" : "alias2",
                 "filter" : { "term" : { "user" : "kimchy" } }
            }
        }
    ]
}'</pre><h4><a id="_routing_8"></a>Routing</h4><p>It is possible to associate routing values with aliases. This feature
can be used together with filtering aliases in order to avoid
unnecessary shard operations.</p><p>The following command creates a new alias <code class="literal">alias1</code> that points to index
<code class="literal">test</code>. After <code class="literal">alias1</code> is created, all operations with this alias are
automatically modified to use value <code class="literal">1</code> for routing:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias1",
                 "routing" : "1"
            }
        }
    ]
}'</pre><p>It’s also possible to specify different routing values for searching
and indexing operations:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias2",
                 "search_routing" : "1,2",
                 "index_routing" : "2"
            }
        }
    ]
}'</pre><p>As shown in the example above, search routing may contain several values
separated by comma. Index routing can contain only a single value.</p><p>If an operation that uses routing alias also has a routing parameter, an
intersection of both alias routing and routing specified in the
parameter is used. For example the following command will use "2" as a
routing value:</p><pre class="programlisting prettyprint noescape lang-js">curl -XGET 'http://localhost:9200/alias2/_search?q=user:kimchy&amp;routing=2,3'</pre><h3><a id="_add_a_single_index_alias"></a>Add a single index alias</h3><p>From version <code class="literal">0.90.1</code> there is an api to add a single index alias,
options:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td valign="top">
<p>
The index to alias refers to. This is a required option.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">alias</code>
</p>
</td><td valign="top">
<p>
The name of the alias. This is a required option.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td valign="top">
<p>
An optional routing that can be associated with an alias.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">filter</code>
</p>
</td><td valign="top">
<p>
An optional filter that can be associated with an alias.
</p>
</td></tr></tbody></table></div><p>The rest endpoint is: <code class="literal">/{index}/_alias/{alias}</code>.</p><h4><a id="_examples"></a>Examples:</h4><p>Adding time based alias:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPUT 'localhost:9200/logs_201305/_alias/2013'</pre><p>Adding user alias:</p><pre class="programlisting prettyprint noescape lang-js">curl -XPUT 'localhost:9200/users/_alias/user_12' -d '{
        "routing" : "12",
    "filter" : {
        "term" : {
            "user_id" : 12
        }
    }
}'</pre><h3><a id="_delete_a_single_index_alias"></a>Delete a single index alias</h3><p>From version <code class="literal">0.90.1</code> there is an api to delete a single index alias,
options:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td valign="top">
<p>
The index the alias is in, the needs to be deleted. This is
          a required option.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">alias</code>
</p>
</td><td valign="top">
<p>
The name of the alias to delete. This is a required option.
</p>
</td></tr></tbody></table></div><p>The rest endpoint is: <code class="literal">/{index}/_alias/{alias}</code>. Example:</p><pre class="programlisting prettyprint noescape lang-js">curl -XDELETE 'localhost:9200/users/_alias/user_12'</pre><h3><a id="_retrieving_existing_aliases"></a>Retrieving existing aliases</h3><p>The get index alias api (Available since <code class="literal">0.90.1</code>) allows to filter by
alias name and index name. This api redirects to the master and fetches
the requested index aliases, if available. This api only serialises the
found index aliases.</p><p>Possible options:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td valign="top">
<p>
    The index name to get aliases for. Partially names are
    supported via wildcards, also multiple index names can be specified
    separated with a comma. Also the alias name for an index can be used.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">alias</code>
</p>
</td><td valign="top">
<p>
    The name of alias to return in the response. Like the index
    option, this option supports wildcards and the option the specify
    multiple alias names separated by a comma. This is a required option.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">ignore_indices</code>
</p>
</td><td valign="top">
<p>
    What to do is an specified index name doesn’t
    exist. If set to <code class="literal">missing</code> then those indices are ignored.
</p>
</td></tr></tbody></table></div><p>The rest endpoint is: <code class="literal">/{index}/_alias/{alias}</code>.</p><h4><a id="_examples_2"></a>Examples:</h4><p>All aliases for the index users:</p><pre class="programlisting prettyprint noescape lang-js">curl -XGET 'localhost:9200/users/_alias/*'</pre><p>Response:</p><pre class="programlisting prettyprint noescape lang-js"> {
  "users" : {
    "aliases" : {
      "user_13" : {
        "filter" : {
          "term" : {
            "user_id" : 13
          }
        },
        "index_routing" : "13",
        "search_routing" : "13"
      },
      "user_14" : {
        "filter" : {
          "term" : {
            "user_id" : 14
          }
        },
        "index_routing" : "14",
        "search_routing" : "14"
      },
      "user_12" : {
        "filter" : {
          "term" : {
            "user_id" : 12
          }
        },
        "index_routing" : "12",
        "search_routing" : "12"
      }
    }
  }
}</pre><p>All aliases with the name 2013 in any index:</p><pre class="programlisting prettyprint noescape lang-js">curl -XGET 'localhost:9200/_alias/2013'</pre><p>Response:</p><pre class="programlisting prettyprint noescape lang-js">{
  "logs_201304" : {
    "aliases" : {
      "2013" : { }
    }
  },
  "logs_201305" : {
    "aliases" : {
      "2013" : { }
    }
  }
}</pre><p>All aliases that start with 2013_01 in any index:</p><pre class="programlisting prettyprint noescape lang-js">curl -XGET 'localhost:9200/_alias/2013_01*'</pre><p>Response:</p><pre class="programlisting prettyprint noescape lang-js">{
  "logs_20130101" : {
    "aliases" : {
      "2013_01" : { }
    }
  }
}</pre><p>There is also a HEAD variant of the get indices aliases api to check if
index aliases exist. The indices aliases exists api supports the same
option as the get indices aliases api. Examples:</p><pre class="programlisting prettyprint noescape lang-js">curl -XHEAD 'localhost:9200/_alias/2013'
curl -XHEAD 'localhost:9200/_alias/2013_01*'
curl -XHEAD 'localhost:9200/users/_alias/*'</pre><h3><a id="_pre_0_90_1_way_of_getting_index_aliases"></a>Pre 0.90.1 way of getting index aliases</h3><p>Aliases can be retrieved using the get aliases API, which can either
return all indices with all aliases, or just for specific indices:</p><pre class="programlisting prettyprint noescape lang-js">curl -XGET 'localhost:9200/test/_aliases'
curl -XGET 'localhost:9200/test1,test2/_aliases'
curl -XGET 'localhost:9200/_aliases'</pre></div><div class="navfooter"><span class="prev"><a href="indices-delete-mapping.html">
              « 
              Delete Mapping</a>
           
        </span><span class="next">
           
          <a href="indices-update-settings.html">Update Indices Settings
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
