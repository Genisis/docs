<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Geo Polygon Filter</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="query-dsl-filters.html" title="Filters" /><link rel="prev" href="query-dsl-geo-distance-range-filter.html" title="Geo Distance Range Filter" /><link rel="next" href="query-dsl-geo-shape-filter.html" title="GeoShape Filter" /><script type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> &gt; <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span> &gt; <span class="breadcrumb-node">Geo Polygon Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-distance-range-filter.html">
              « 
              Geo Distance Range Filter</a>
           
        </span><span class="next">
           
          <a href="query-dsl-geo-shape-filter.html">GeoShape Filter
               » 
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-polygon-filter"></a>Geo Polygon Filter</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="query-dsl-and-filter.html">And Filter</a></span></dt><dt><span class="section"><a href="query-dsl-bool-filter.html">Bool Filter</a></span></dt><dt><span class="section"><a href="query-dsl-exists-filter.html">Exists Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geo-bounding-box-filter.html">Geo Bounding Box Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geo-distance-filter.html">Geo Distance Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geo-distance-range-filter.html">Geo Distance Range Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geo-polygon-filter.html">Geo Polygon Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geo-shape-filter.html">GeoShape Filter</a></span></dt><dt><span class="section"><a href="query-dsl-geohash-cell-filter.html">Geohash Cell Filter</a></span></dt><dt><span class="section"><a href="query-dsl-has-child-filter.html">Has Child Filter</a></span></dt><dt><span class="section"><a href="query-dsl-has-parent-filter.html">Has Parent Filter</a></span></dt><dt><span class="section"><a href="query-dsl-ids-filter.html">Ids Filter</a></span></dt><dt><span class="section"><a href="query-dsl-limit-filter.html">Limit Filter</a></span></dt><dt><span class="section"><a href="query-dsl-match-all-filter.html">Match All Filter</a></span></dt><dt><span class="section"><a href="query-dsl-missing-filter.html">Missing Filter</a></span></dt><dt><span class="section"><a href="query-dsl-nested-filter.html">Nested Filter</a></span></dt><dt><span class="section"><a href="query-dsl-not-filter.html">Not Filter</a></span></dt><dt><span class="section"><a href="query-dsl-numeric-range-filter.html">Numeric Range Filter</a></span></dt><dt><span class="section"><a href="query-dsl-or-filter.html">Or Filter</a></span></dt><dt><span class="section"><a href="query-dsl-prefix-filter.html">Prefix Filter</a></span></dt><dt><span class="section"><a href="query-dsl-query-filter.html">Query Filter</a></span></dt><dt><span class="section"><a href="query-dsl-range-filter.html">Range Filter</a></span></dt><dt><span class="section"><a href="query-dsl-regexp-filter.html">Regexp Filter</a></span></dt><dt><span class="section"><a href="query-dsl-script-filter.html">Script Filter</a></span></dt><dt><span class="section"><a href="query-dsl-term-filter.html">Term Filter</a></span></dt><dt><span class="section"><a href="query-dsl-terms-filter.html">Terms Filter</a></span></dt><dt><span class="section"><a href="query-dsl-type-filter.html">Type Filter</a></span></dt></dl></div><p>A filter allowing to include hits that only fall within a polygon of
points. Here is an example:</p><pre class="programlisting prettyprint lang-js">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        {"lat" : 40, "lon" : -70},
                        {"lat" : 30, "lon" : -80},
                        {"lat" : 20, "lon" : -90}
                    ]
                }
            }
        }
    }
}</pre><h4><a id="_allowed_formats"></a>Allowed Formats</h4><h5><a id="_lat_long_as_array"></a>Lat Long as Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><pre class="programlisting prettyprint lang-js">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        [-70, 40],
                        [-80, 30],
                        [-90, 20]
                    ]
                }
            }
        }
    }
}</pre><h5><a id="_lat_lon_as_string_5"></a>Lat Lon as String</h5><p>Format in <code class="literal">lat,lon</code>.</p><pre class="programlisting prettyprint lang-js">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "40, -70",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre><h5><a id="_geohash_5"></a>Geohash</h5><pre class="programlisting prettyprint lang-js">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "drn5x1g8cu2y",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre><h4><a id="_geo_point_type_3"></a>geo_point Type</h4><p>The filter <span class="strong"><strong>requires</strong></span> the
<a class="link" href="mapping-geo-point-type.html" title="Geo Point Type">geo_point</a> type to be
set on the relevant field.</p><h4><a id="_caching_6"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong"><strong>result</strong></span> of the filter. This is handy when
the same points parameters are used on several (many) other queries.
Note, the process of caching the first execution is higher when caching
(since it needs to satisfy different queries).</p></div><div class="navfooter"><span class="prev"><a href="query-dsl-geo-distance-range-filter.html">
              « 
              Geo Distance Range Filter</a>
           
        </span><span class="next">
           
          <a href="query-dsl-geo-shape-filter.html">GeoShape Filter
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
