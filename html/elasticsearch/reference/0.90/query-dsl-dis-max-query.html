<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Dis Max Query</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="query-dsl-queries.html" title="Queries" /><link rel="prev" href="query-dsl-constant-score-query.html" title="Constant Score Query" /><link rel="next" href="query-dsl-field-query.html" title="Field Query" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> &gt; <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span> &gt; <span class="breadcrumb-node">Dis Max Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-constant-score-query.html">
              « 
              Constant Score Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-field-query.html">Field Query
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-dis-max-query"></a>Dis Max Query</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-match-query.html">Match Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-multi-match-query.html">Multi Match Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-bool-query.html">Bool Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-boosting-query.html">Boosting Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-common-terms-query.html">Common Terms Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-custom-filters-score-query.html">Custom Filters Score Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-ids-query.html">Ids Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-custom-score-query.html">Custom Score Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-custom-boost-factor-query.html">Custom Boost Factor Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-constant-score-query.html">Constant Score Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-dis-max-query.html">Dis Max Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-field-query.html">Field Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-filtered-query.html">Filtered Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-flt-query.html">Fuzzy Like This Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-flt-field-query.html">Fuzzy Like This Field Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-fuzzy-query.html">Fuzzy Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-geo-shape-query.html">GeoShape Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-has-child-query.html">Has Child Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-has-parent-query.html">Has Parent Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-indices-query.html">Indices Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-match-all-query.html">Match All Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-mlt-query.html">More Like This Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-mlt-field-query.html">More Like This Field Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-nested-query.html">Nested Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-prefix-query.html">Prefix Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-query-string-query.html">Query String Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-range-query.html">Range Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-regexp-query.html">Regexp Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-first-query.html">Span First Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-multi-term-query.html">Span Multi Term Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-near-query.html">Span Near Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-not-query.html">Span Not Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-or-query.html">Span Or Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-span-term-query.html">Span Term Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-term-query.html">Term Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-terms-query.html">Terms Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-top-children-query.html">Top Children Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-wildcard-query.html">Wildcard Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-text-query.html">Text Query</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-minimum-should-match.html">Minimum Should Match</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="query-dsl-multi-term-rewrite.html">Multi Term Query Rewrite</a></span></dt></dl></div><p>A query that generates the union of documents produced by its
subqueries, and that scores each document with the maximum score for
that document as produced by any subquery, plus a tie breaking increment
for any additional matching subqueries.</p><p>This is useful when searching for a word in multiple fields with
different boost factors (so that the fields cannot be combined
equivalently into a single search field). We want the primary score to
be the one associated with the highest boost, not the sum of the field
scores (as Boolean Query would give). If the query is "albino elephant"
this ensures that "albino" matching one field and "elephant" matching
another gets a higher score than "albino" matching both fields. To get
this result, use both Boolean Query and DisjunctionMax Query: for each
term a DisjunctionMaxQuery searches for it in each field, while the set
of these DisjunctionMaxQuery’s is combined into a BooleanQuery.</p><p>The tie breaker capability allows results that include the same term in
multiple fields to be judged better than results that include this term
in only the best of those multiple fields, without confusing this with
the better case of two different terms in the multiple fields.The
default <code class="literal">tie_breaker</code> is <code class="literal">0.0</code>.</p><p>This query maps to Lucene <code class="literal">DisjunctionMaxQuery</code>.</p><pre class="programlisting prettyprint lang-js">{
    "dis_max" : {
        "tie_breaker" : 0.7,
        "boost" : 1.2,
        "queries" : [
            {
                "term" : { "age" : 34 }
            },
            {
                "term" : { "age" : 35 }
            }
        ]
    }
}</pre></div><div class="navfooter"><span class="prev"><a href="query-dsl-constant-score-query.html">
              « 
              Constant Score Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-field-query.html">Field Query
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
