<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Delete API</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="docs.html" title="Document APIs" /><link rel="prev" href="docs-get.html" title="Get API" /><link rel="next" href="docs-update.html" title="Update API" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span> &gt; <span class="breadcrumb-node">Delete API</span></div><div class="navheader"><span class="prev"><a href="docs-get.html">
              « 
              Get API</a>
           
        </span><span class="next">
           
          <a href="docs-update.html">Update API
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-delete"></a>Delete API</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-index_.html">Index API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-get.html">Get API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-delete.html">Delete API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-update.html">Update API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-multi-get.html">Multi Get API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-bulk.html">Bulk API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-delete-by-query.html">Delete By Query API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="docs-bulk-udp.html">Bulk UDP API</a></span></dt></dl></div><p>The delete API allows to delete a typed JSON document from a specific
index based on its id. The following example deletes the JSON document
from an index called twitter, under a type called tweet, with id valued
1:</p><pre class="programlisting prettyprint lang-js">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/1'</pre><p>The result of the above delete operation is:</p><pre class="programlisting prettyprint lang-js">{
    "ok" : true,
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "1",
    "found" : true
}</pre><h3><a id="_versioning_2"></a>Versioning</h3><p>Each document indexed is versioned. When deleting a document, the
<code class="literal">version</code> can be specified to make sure the relevant document we are
trying to delete is actually being deleted and it has not changed in the
meantime.</p><h3><a id="_routing_3"></a>Routing</h3><p>When indexing using the ability to control the routing, in order to
delete a document, the routing value should also be provided. For
example:</p><pre class="programlisting prettyprint lang-js">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/1?routing=kimchy'</pre><p>The above will delete a tweet with id 1, but will be routed based on the
user. Note, issuing a delete without the correct routing, will cause the
document to not be deleted.</p><p>Many times, the routing value is not known when deleting a document. For
those cases, when specifying the <code class="literal">_routing</code> mapping as <code class="literal">required</code>, and
no routing value is specified, the delete will be broadcasted
automatically to all shards.</p><h3><a id="_parent"></a>Parent</h3><p>The <code class="literal">parent</code> parameter can be set, which will basically be the same as
setting the routing parameter.</p><p>Note that deleting a parent document does not automatically delete its
children. One way of deleting all child documents given a parent’s id is
to perform a <a class="link" href="docs-delete-by-query.html" title="Delete By Query API">delete by query</a> on the child
index with the automatically generated (and indexed)
field _parent, which is in the format parent_type#parent_id.</p><h3><a id="_automatic_index_creation_2"></a>Automatic index creation</h3><p>The delete operation automatically creates an index if it has not been
created before (check out the <a class="link" href="indices-create-index.html" title="Create Index">create index API</a>
for manually creating an index), and also automatically creates a
dynamic type mapping for the specific type if it has not been created
before (check out the <a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a>
API for manually creating type mapping).</p><h3><a id="_distributed_3"></a>Distributed</h3><p>The delete operation gets hashed into a specific shard id. It then gets
redirected into the primary shard within that id group, and replicated
(if needed) to shard replicas within that id group.</p><h3><a id="_replication_type"></a>Replication Type</h3><p>The replication of the operation can be done in an asynchronous manner
to the replicas (the operation will return once it has be executed on
the primary shard). The <code class="literal">replication</code> parameter can be set to <code class="literal">async</code>
(defaults to <code class="literal">sync</code>) in order to enable it.</p><h3><a id="_write_consistency_2"></a>Write Consistency</h3><p>Control if the operation will be allowed to execute based on the number
of active shards within that partition (replication group). The values
allowed are <code class="literal">one</code>, <code class="literal">quorum</code>, and <code class="literal">all</code>. The parameter to set it is
<code class="literal">consistency</code>, and it defaults to the node level setting of
<code class="literal">action.write_consistency</code> which in turn defaults to <code class="literal">quorum</code>.</p><p>For example, in a N shards with 2 replicas index, there will have to be
at least 2 active shards within the relevant partition (<code class="literal">quorum</code>) for
the operation to succeed. In a N shards with 1 replica scenario, there
will need to be a single shard active (in this case, <code class="literal">one</code> and <code class="literal">quorum</code>
is the same).</p><h3><a id="_refresh_3"></a>Refresh</h3><p>The <code class="literal">refresh</code> parameter can be set to <code class="literal">true</code> in order to refresh the
relevant shard after the delete operation has occurred and make it
searchable. Setting it to <code class="literal">true</code> should be done after careful thought
and verification that this does not cause a heavy load on the system
(and slows down indexing).</p></div><div class="navfooter"><span class="prev"><a href="docs-get.html">
              « 
              Get API</a>
           
        </span><span class="next">
           
          <a href="docs-update.html">Update API
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
