<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Index Templates</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="indices.html" title="Indices APIs" /><link rel="prev" href="indices-analyze.html" title="Analyze" /><link rel="next" href="indices-warmers.html" title="Warmers" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span> &gt; <span class="breadcrumb-node">Index Templates</span></div><div class="navheader"><span class="prev"><a href="indices-analyze.html">
              « 
              Analyze</a>
           
        </span><span class="next">
           
          <a href="indices-warmers.html">Warmers
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-templates"></a>Index Templates</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-create-index.html">Create Index</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-delete-index.html">Delete Index</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-exists.html">Indices Exists</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-open-close.html">Open / Close Index API</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-put-mapping.html">Put Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-get-mapping.html">Get Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-types-exists.html">Types Exists</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-delete-mapping.html">Delete Mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-aliases.html">Index Aliases</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-update-settings.html">Update Indices Settings</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-get-settings.html">Get Settings</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-analyze.html">Analyze</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-templates.html">Index Templates</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-warmers.html">Warmers</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-status.html">Status</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-stats.html">Indices Stats</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-segments.html">Indices Segments</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-clearcache.html">Clear Cache</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-flush.html">Flush</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-refresh.html">Refresh</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-optimize.html">Optimize</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="indices-gateway-snapshot.html">Gateway Snapshot</a></span></dt></dl></div><p>Index templates allow to define templates that will automatically be
applied to new indices created. The templates include both settings and
mappings, and a simple pattern template that controls if the template
will be applied to the index created. For example:</p><pre class="programlisting prettyprint lang-js">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "te*",
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false }
        }
    }
}
'</pre><p>Defines a template named template_1, with a template pattern of <code class="literal">te*</code>.
The settings and mappings will be applied to any index name that matches
the <code class="literal">te*</code> template.</p><h3><a id="_deleting_a_template"></a>Deleting a Template</h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be delete as well:</p><pre class="programlisting prettyprint lang-js">curl -XDELETE localhost:9200/_template/template_1</pre><h3><a id="_getting_a_template"></a>GETting a Template</h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be retrieved using the following:</p><pre class="programlisting prettyprint lang-js">curl -XGET localhost:9200/_template/template_1</pre><p>To get list of all index templates you can use
<a class="link" href="cluster-state.html" title="Cluster State">Cluster State</a> API
and check for the metadata/templates section of the response.</p><h3><a id="_multiple_template_matching"></a>Multiple Template Matching</h3><p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p><pre class="programlisting prettyprint lang-js">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "*",
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false }
        }
    }
}
'

curl -XPUT localhost:9200/_template/template_2 -d '
{
    "template" : "te*",
    "order" : 1,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : true }
        }
    }
}
'</pre><p>The above will disable storing the <code class="literal">_source</code> on all <code class="literal">type1</code> types, but
for indices of that start with <code class="literal">te*</code>, source will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p><h3><a id="_config"></a>Config</h3><p>Index templates can also be placed within the config location
(<code class="literal">path.conf</code>) under the <code class="literal">templates</code> directory (note, make sure to place
them on all master eligible nodes). For example, a file called
<code class="literal">template_1.json</code> can be placed under <code class="literal">config/templates</code> and it will be
added if it matches an index. Here is a sample of the mentioned file:</p><pre class="programlisting prettyprint lang-js">{
    "template_1" : {
        "template" : "*",
        "settings" : {
            "index.number_of_shards" : 2
        },
        "mappings" : {
            "_default_" : {
                "_source" : {
                    "enabled" : false
                }
            },
            "type1" : {
                "_all" : {
                    "enabled" : false
                }
            }
        }
    }
}</pre></div><div class="navfooter"><span class="prev"><a href="indices-analyze.html">
              « 
              Analyze</a>
           
        </span><span class="next">
           
          <a href="indices-warmers.html">Warmers
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
