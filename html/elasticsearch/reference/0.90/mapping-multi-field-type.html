<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Multi Field Type</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="mapping-types.html" title="Types" /><link rel="prev" href="mapping-nested-type.html" title="Nested Type" /><link rel="next" href="mapping-ip-type.html" title="IP Type" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span> &gt; <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span> &gt; <span class="breadcrumb-node">Multi Field Type</span></div><div class="navheader"><span class="prev"><a href="mapping-nested-type.html">
              « 
              Nested Type</a>
           
        </span><span class="next">
           
          <a href="mapping-ip-type.html">IP Type
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-multi-field-type"></a>Multi Field Type</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-core-types.html">Core Types</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-array-type.html">Array Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-object-type.html">Object Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-root-object-type.html">Root Object Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-nested-type.html">Nested Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-multi-field-type.html">Multi Field Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-ip-type.html">IP Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-geo-point-type.html">Geo Point Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-geo-shape-type.html">Geo Shape Type</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="mapping-attachment-type.html">Attachment Type</a></span></dt></dl></div><p>The <code class="literal">multi_field</code> type allows to map several
<a class="link" href="mapping-core-types.html" title="Core Types">core_types</a> of the same
value. This can come very handy, for example, when wanting to map a
<code class="literal">string</code> type, once when it’s <code class="literal">analyzed</code> and once when it’s
<code class="literal">not_analyzed</code>. For example:</p><pre class="programlisting prettyprint lang-js">{
    "tweet" : {
        "properties" : {
            "name" : {
                "type" : "multi_field",
                "fields" : {
                    "name" : {"type" : "string", "index" : "analyzed"},
                    "untouched" : {"type" : "string", "index" : "not_analyzed"}
                }
            }
        }
    }
}</pre><p>The above example shows how the <code class="literal">name</code> field, which is of simple
<code class="literal">string</code> type, gets mapped twice, once with it being <code class="literal">analyzed</code> under
<code class="literal">name</code>, and once with it being <code class="literal">not_analyzed</code> under <code class="literal">untouched</code>.</p><h4><a id="_accessing_fields"></a>Accessing Fields</h4><p>With <code class="literal">multi_field</code> mapping, the field that has the same name as the
property is treated as if it was mapped without a multi field. That’s
the "default" field. It can be accessed regularly, for example using
<code class="literal">name</code> or using typed navigation <code class="literal">tweet.name</code>.</p><p>The <code class="literal">path</code> attribute allows to control how non-default fields can be
accessed. If the <code class="literal">path</code> attribute is set to <code class="literal">full</code>, which is the default
setting, all non-default fields are prefixed with the name of the
property and can be accessed by their full path using the navigation
notation: <code class="literal">name.untouched</code>, or using the typed navigation notation
<code class="literal">tweet.name.untouched</code>. If the <code class="literal">path</code> attribute is set to <code class="literal">just_name</code>
the actual field name without a prefix is used. The <code class="literal">just_name</code> setting,
among other things, allows indexing content of multiple fields under the
same name. In the example below the content of both fields <code class="literal">first_name</code>
and <code class="literal">last_name</code> can be accessed by using <code class="literal">any_name</code> or <code class="literal">tweet.any_name</code></p><pre class="programlisting prettyprint lang-js">{
    "tweet" : {
        "properties": {
            "first_name": {
                "type": "multi_field",
                "path": "just_name",
                "fields": {
                    "first_name": {"type": "string", "index": "analyzed"},
                    "any_name": {"type": "string","index": "analyzed"}
                }
            },
            "last_name": {
                "type": "multi_field",
                "path": "just_name",
                "fields": {
                    "last_name": {"type": "string", "index": "analyzed"},
                    "any_name": {"type": "string","index": "analyzed"}
                }
            }
        }
    }
}</pre><h4><a id="_include_in_all_2"></a>Include in All</h4><p>The <code class="literal">include_in_all</code> setting on the "default" field allows to control if
the value of the field should be included in the <code class="literal">_all</code> field. Note, the
value of the field is copied to <code class="literal">_all</code>, not the tokens. So, it only
makes sense to copy the field value once. Because of this, the
<code class="literal">include_in_all</code> setting on all non-default fields is automatically set
to <code class="literal">false</code> and can’t be changed.</p><h4><a id="_merging"></a>Merging</h4><p>When updating mapping definition using the <code class="literal">put_mapping</code> API, a core
type mapping can be "upgraded" to a <code class="literal">multi_field</code> mapping. This means
that if the old mapping has a plain core type mapping, the updated
mapping for the same property can be a <code class="literal">multi_field</code> type, with the
default field being the one being replaced.</p></div><div class="navfooter"><span class="prev"><a href="mapping-nested-type.html">
              « 
              Nested Type</a>
           
        </span><span class="next">
           
          <a href="mapping-ip-type.html">IP Type
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
