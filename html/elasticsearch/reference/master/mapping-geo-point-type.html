<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Geo Point Type</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference" /><link rel="up" href="mapping-types.html" title="Types" /><link rel="prev" href="mapping-ip-type.html" title="IP Type" /><link rel="next" href="mapping-geo-shape-type.html" title="Geo Shape Type" /><script type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span> &gt; <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span> &gt; <span class="breadcrumb-node">Geo Point Type</span></div><div class="navheader"><span class="prev"><a href="mapping-ip-type.html">
              « 
              IP Type</a>
           
        </span><span class="next">
           
          <a href="mapping-geo-shape-type.html">Geo Shape Type
               » 
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-geo-point-type"></a>Geo Point Type</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="mapping-core-types.html">Core Types</a></span></dt><dt><span class="section"><a href="mapping-array-type.html">Array Type</a></span></dt><dt><span class="section"><a href="mapping-object-type.html">Object Type</a></span></dt><dt><span class="section"><a href="mapping-root-object-type.html">Root Object Type</a></span></dt><dt><span class="section"><a href="mapping-nested-type.html">Nested Type</a></span></dt><dt><span class="section"><a href="mapping-multi-field-type.html">Multi Field Type</a></span></dt><dt><span class="section"><a href="mapping-ip-type.html">IP Type</a></span></dt><dt><span class="section"><a href="mapping-geo-point-type.html">Geo Point Type</a></span></dt><dt><span class="section"><a href="mapping-geo-shape-type.html">Geo Shape Type</a></span></dt><dt><span class="section"><a href="mapping-attachment-type.html">Attachment Type</a></span></dt></dl></div><p>Mapper type called <code class="literal">geo_point</code> to support geo based points. The
declaration looks as follows:</p><pre class="programlisting prettyprint lang-js">{
    "pin" : {
        "properties" : {
            "location" : {
                "type" : "geo_point"
            }
        }
    }
}</pre><h4><a id="_indexed_fields"></a>Indexed Fields</h4><p>The <code class="literal">geo_point</code> mapping will index a single field with the format of
<code class="literal">lat,lon</code>. The <code class="literal">lat_lon</code> option can be set to also index the <code class="literal">.lat</code> and
<code class="literal">.lon</code> as numeric fields, and <code class="literal">geohash</code> can be set to <code class="literal">true</code> to also
index <code class="literal">.geohash</code> value.</p><p>A good practice is to enable indexing <code class="literal">lat_lon</code> as well, since both the
geo distance and bounding box filters can either be executed using in
memory checks, or using the indexed lat lon values, and it really
depends on the data set which one performs better. Note though, that
indexed lat lon only make sense when there is a single geo point value
for the field, and not multi values.</p><h4><a id="_input_structure"></a>Input Structure</h4><p>The above mapping defines a <code class="literal">geo_point</code>, which accepts different
formats. The following formats are supported:</p><h5><a id="_lat_lon_as_properties_5"></a>Lat Lon as Properties</h5><pre class="programlisting prettyprint lang-js">{
    "pin" : {
        "location" : {
            "lat" : 41.12,
            "lon" : -71.34
        }
    }
}</pre><h5><a id="_lat_lon_as_string_6"></a>Lat Lon as String</h5><p>Format in <code class="literal">lat,lon</code>.</p><pre class="programlisting prettyprint lang-js">{
    "pin" : {
        "location" : "41.12,-71.34"
    }
}</pre><h5><a id="_geohash_6"></a>Geohash</h5><pre class="programlisting prettyprint lang-js">{
    "pin" : {
        "location" : "drm3btev3e86"
    }
}</pre><h5><a id="_lat_lon_as_array_5"></a>Lat Lon as Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><pre class="programlisting prettyprint lang-js">{
    "pin" : {
        "location" : [-71.34, 41.12]
    }
}</pre><h4><a id="_mapping_options"></a>Mapping Options</h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Option </th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">lat_lon</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to also index the <code class="literal">.lat</code> and <code class="literal">.lon</code> as fields.
Defaults to <code class="literal">false</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">geohash</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to also index the <code class="literal">.geohash</code> as a field.
Defaults to <code class="literal">false</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">geohash_precision</code></p></td><td align="left" valign="top"><p>Sets the geohash precision, defaults to 12.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">validate</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to reject geo points with invalid latitude or
longitude (default is <code class="literal">false</code>) <span class="strong"><strong>Note</strong></span>: Validation only works when
normalization has been disabled.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">validate_lat</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to reject geo points with an invalid
latitude</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">validate_lon</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to reject geo points with an invalid
longitude</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">normalize</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize latitude and longitude (default
is <code class="literal">true</code>)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">normalize_lat</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize latitude</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">normalize_lon</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize longitude</p></td></tr></tbody></table></div><h4><a id="_usage_in_scripts"></a>Usage in Scripts</h4><p>When using <code class="literal">doc[geo_field_name]</code> (in the above mapping,
<code class="literal">doc['location']</code>), the <code class="literal">doc[...].value</code> returns a <code class="literal">GeoPoint</code>, which
then allows access to <code class="literal">lat</code> and <code class="literal">lon</code> (for example,
<code class="literal">doc[...].value.lat</code>). For performance, it is better to access the <code class="literal">lat</code>
and <code class="literal">lon</code> directly using <code class="literal">doc[...].lat</code> and <code class="literal">doc[...].lon</code>.</p></div><div class="navfooter"><span class="prev"><a href="mapping-ip-type.html">
              « 
              IP Type</a>
           
        </span><span class="next">
           
          <a href="mapping-geo-shape-type.html">Geo Shape Type
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
