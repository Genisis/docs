<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Automatic mapping</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Hadoop" /><link rel="up" href="mapping.html" title="Mapping and Type conversion" /><link rel="prev" href="_converting_data_to_elasticsearch.html" title="Converting data to Elasticsearch" /><link rel="next" href="explicit-mapping.html" title="Explicit mapping" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Hadoop</a></span> &gt; <span class="breadcrumb-link"><a href="_reference.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="mapping.html">Mapping and Type conversion</a></span> &gt; <span class="breadcrumb-node">Automatic mapping</span></div><div class="navheader"><span class="prev"><a href="_converting_data_to_elasticsearch.html">
              « 
              Converting data to Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="explicit-mapping.html">Explicit mapping
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_automatic_mapping"></a>Automatic mapping</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="_converting_data_to_elasticsearch.html">Converting data to Elasticsearch</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="_automatic_mapping.html">Automatic mapping</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="section"><a href="explicit-mapping.html">Explicit mapping</a></span></dt></dl></div><p>By default, Elasticsearch provides <a class="ulink" href="http://www.elasticsearch.org/guide/reference/api/index_/" target="_top">automatic index and mapping</a> when data is added under an index that has not been created before. In other words, data can be added into Elasticsearch without the index and the mappings being defined a priori. This is quite convenient since Elasticsearch automatically adapts to the data being fed to it - moreover, if certain entries have extra fields, Elasticsearch schema-less nature allows them to be indexed without any issues.</p><p><a id="auto-mapping-type-loss"></a>It is important to remember that automatic mapping uses the payload values to identify its <a class="ulink" href="http://www.elasticsearch.org/guide/reference/mapping/core-types/" target="_top">type</a>, using the <span class="strong"><strong>first document</strong></span> creates the mapping. Elasticsearch Hadoop communicates with Elasticsearch through JSON which does not provide any type information, rather only the field names and their values. One can think of it as <span class="emphasis"><em>type erasure</em></span> or information loss; for example JSON does not differentiate integer numeric types - <code class="literal">byte</code>, <code class="literal">short</code>, <code class="literal">int</code>, <code class="literal">long</code> are all placed in the same <code class="literal">integer</code> <span class="emphasis"><em>bucket</em></span>. this can have unexpected side-effects since the type information is <span class="emphasis"><em>guessed</em></span> such as:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
numbers mapped only as <code class="literal">long</code>/<code class="literal">double</code>
</span></dt><dd>
Whenever Elasticsearch encounters a number, it will allocate the largest type for it since it does not know the exact number type of the field. Allocating a small type (such as <code class="literal">byte</code>, <code class="literal">int</code> or <code class="literal">float</code>) can lead to problems if a future document is larger, so Elasticsearch uses a safe default.
</dd><dt><span class="term">
incorrect mapping
</span></dt><dd>
This happens when a string field contains only numbers (say <code class="literal">1234</code>) - Elasticsearch has no information that the number is actually a string and thus it map the field as a number. The same issue tends to occur with dates and strings.
</dd></dl></div><p>Only if the defaults need to be overridden and/or if you experience the problems exposed below, consider using <a class="xref" href="explicit-mapping.html" title="Explicit mapping">Explicit mapping</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_disabling_automatic_mapping"></a>Disabling automatic mapping</h3></div></div></div><p>Elasticsearch allows <span class="emphasis"><em>automatic index creation</em></span> as well as <span class="emphasis"><em>dynamic mapping</em></span> (for extra fields present in documents) to be disabled through the <code class="literal">action.auto_create_index</code> and <code class="literal">index.mapper.dynamic</code> settings on the nodes config files. As a safety net, Elasticsearch Hadoop provides a dedicated configuration <a class="link" href="configuration.html#configuration-options-index" title="Index">option</a> <code class="literal">es.index.auto.create</code> which allows Elasticsearch Hadoop to either create the index or not without having to modify the Elasticsearch cluster options.</p></div></div><div class="navfooter"><span class="prev"><a href="_converting_data_to_elasticsearch.html">
              « 
              Converting data to Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="explicit-mapping.html">Explicit mapping
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
