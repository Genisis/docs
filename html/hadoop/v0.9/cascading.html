<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cascading support</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Hadoop" /><link rel="up" href="_reference.html" title="Reference" /><link rel="prev" href="mapreduce.html" title="Map/Reduce integration" /><link rel="next" href="hive.html" title="Apache Hive integration" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/wp-includes/js/jquery/jquery.js?ver=1.8.3"></script><link xmlns="" rel="stylesheet" id="prettify-gc-syntax-highlighter-css" href="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.css?ver=3.5.2" type="text/css" media="all" /><link xmlns="" rel="stylesheet" id="appStyles-css" href="http://www.elasticsearch.org/content/themes/elasticsearch-org/css/main.css?ver=1376314515" type="text/css" media="all" /><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/modernizr-2.6.1.min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/vendor/selectivizr-min.js?ver=1"></script><script xmlns="" type="text/javascript" src="http://www.elasticsearch.org/content/themes/elasticsearch-org/js/plugins.min.js?ver=1375472072"></script><link xmlns="" rel="stylesheet" type="text/css" href="styles.css" /></head><body class="single single-guide"><div class="global_wrapper"><div id="index" class="page_content"><div class="container"><section class="full_width guide"><article class="guide_content"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Hadoop</a></span> &gt; <span class="breadcrumb-link"><a href="_reference.html">Reference</a></span> &gt; <span class="breadcrumb-node">Cascading support</span></div><div class="navheader"><span class="prev"><a href="mapreduce.html">
              « 
              Map/Reduce integration</a>
           
        </span><span class="next">
           
          <a href="hive.html">Apache Hive integration
               » 
            </a></span></div><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cascading"></a>Cascading support</h2></div></div></div><div xmlns="" class="toc"><dl><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="configuration.html">Configuration options</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="runtime-configuration.html">Hadoop runtime options</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="mapreduce.html">Map/Reduce integration</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="cascading.html">Cascading support</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="hive.html">Apache Hive integration</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="pig.html">Apache Pig support</a></span></dt><dt xmlns="http://www.w3.org/1999/xhtml"><span class="chapter"><a href="mapping.html">Mapping and Type conversion</a></span></dt></dl></div><div class="blockquote"><table border="0" class="blockquote" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p><a class="ulink" href="http://www.cascading.org/" target="_top">Cascading</a> is a data processing API and processing query planner used for defining, sharing, and executing data-processing workflows on a single computing node or distributed computing cluster.</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
Cascading website
</span></td></tr></table></div><p>Cascading abstracting the Map/Reduce API and focusing on <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03.html" target="_top">data processing</a>
in terms of <span class="emphasis"><em>tuples</em></span> <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s08.html" target="_top"><span class="emphasis"><em>flowing</em></span></a> through <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s02.html" target="_top">pipes</a> between <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s05.html" target="_top"><span class="emphasis"><em>taps</em></span></a>,
from input (called <code class="literal">SourceTap</code>) to output (named <code class="literal">SinkTap</code>). As the data flows, various operations are applied to the tuple; the whole system being transformed to Map/Reduce operations at runtime.
With Elasticsearch Hadoop, Elasticsearch can be plugged into Cascading flows as a <code class="literal">SourceTap</code> or <code class="literal">SinkTap</code> through <code class="literal">ESTap</code>.</p><div class="sidebar"><div class="titlepage"></div><p><strong>Local or Hadoop mode? </strong>Cascading supports two <span class="emphasis"><em>execution</em></span> modes or <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s04.html" target="_top">platforms</a>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Local
</span></dt><dd>
for unit testing and quick POCs. Everything runs only on the local machine and file-system.
</dd><dt><span class="term">
Hadoop
</span></dt><dd>
production mode - connects to a proper Hadoop cluster (as oppose to the <span class="emphasis"><em>local</em></span> mode which is running just on the local machine).
</dd></dl></div><p>Elasticsearch Hadoop supports <span class="strong"><strong>both</strong></span> platforms automatically. One does not have to choose between different classes, <code class="literal">EsTap</code> can be used as both <code class="literal">sink</code> or <code class="literal">source</code>, in both modes transparently.</p></div><h3><a id="_installation_2"></a>Installation</h3><p>Just like other libraries, Elasticsearch Hadoop needs to be available in the jar classpath (either by being manually deployed in the cluster or shipped along with the Hadoop job).</p><h3><a id="type-conversion-cascading"></a>Type conversion</h3><p>Depending on the <a class="ulink" href="http://docs.cascading.org/cascading/2.1/userguide/html/ch03s04.html" target="_top">platform</a> used, Cascading can use internally either <code class="literal">Writable</code> or JDK types for its tuples. Elasticsearch handles both transparently
(see the Map/Reduce <a class="link" href="mapreduce.html#type-conversion-writable" title="Type conversion">conversion</a> section) though we recommend using the same types (if possible) in both cases to avoid the overhead of maintaining two different versions.</p><div class="important" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Important</h3><p>If automatic index creation is used, please review <a class="link" href="_automatic_mapping.html#auto-mapping-type-loss">this</a> section for more information.</p></div><h3><a id="_writing_data_to_elasticsearch_2"></a>Writing data to Elasticsearch</h3><p>Simply hook, <code class="literal">ESTap</code> into the Cascading flow:</p><pre class="programlisting prettyprint noescape lang-java">Tap in = Lfs(new TextDelimited(new Fields("id", "name", "url", "picture")),
                                "src/test/resources/artists.dat");
Tap out = new ESTap("radio/artists", new Fields("name", "url", "picture"));
new HadoopFlowConnector().connect(in, out, new Pipe("write-to-Eleasti")).complete();</pre><h3><a id="_reading_data_from_elasticsearch_2"></a>Reading data from Elasticsearch</h3><p>Just the same, add <code class="literal">ESTap</code> on the other end of a pipe, to read (instead of writing) to it.</p><pre class="programlisting prettyprint noescape lang-java">Tap in = new ESTap("radio/artists/_search?q=me*");
Tap out = new StdOut(new TextLine());
new LocalFlowConnector().connect(in, out, new Pipe("read-from-ES")).complete();</pre></div><div class="navfooter"><span class="prev"><a href="mapreduce.html">
              « 
              Map/Reduce integration</a>
           
        </span><span class="next">
           
          <a href="hive.html">Apache Hive integration
               » 
            </a></span></div></article></section></div></div></div><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/prettify.js?ver=3.5.2"></script><script type="text/javascript" src="http://www.elasticsearch.org/content/plugins/prettify-gc-syntax-highlighter/launch.js?ver=3.5.2"></script></body></html>
